<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Login</title>
  <link rel="stylesheet" href="/site-style.css">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    main{max-width:420px;margin:3rem auto;padding:0 1rem}
    form{display:grid;gap:0.75rem}
    input{padding:0.6rem;border:1px solid #ddd;border-radius:6px;font:inherit}
    button{padding:0.6rem 1rem;border:1px solid #333;background:#111;color:#fff;border-radius:6px}
    .error{background:#ffe6e6;border:1px solid #f5a; padding:0.75rem;border-radius:6px}
    .success{background:#e8fff1;border:1px solid #7c9; padding:0.75rem;border-radius:6px}
  </style>
  <script>
    async function onLogin(e){
      e.preventDefault();
      const fd = new FormData(e.target);
      const body = Object.fromEntries(fd.entries());
      const msg = document.getElementById('msg');
      msg.className=''; msg.textContent='';
      try {
        const res = await fetch('/api/admin/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username: body.username.trim(), password: body.password })
        });
        const d = await res.json();
        if(!d.ok){ throw new Error(d.message + (d.detail ? ' – ' + d.detail : '')); }
        msg.className='success'; msg.textContent='Logged in';
        location.href = '/admin';
      } catch(err){
        msg.className='error'; msg.textContent = 'Login failed: ' + err.message;
      }
    }
  </script>
  </head>
  <body>
    <main>
      <h1>Admin Login</h1>
      <p>Please sign in to access the CMS.</p>
      <div id="msg"></div>
      <form onsubmit="onLogin(event)">
        <label>Email<br>
          <input name="username" inputmode="email" autocomplete="username" required placeholder="you@example.com" value="edwardsalexk@gmail.com" />
        </label>
        <label>Password<br>
          <input name="password" type="password" autocomplete="current-password" required placeholder="••••••••" />
        </label>
        <div>
          <button type="submit">Sign In</button>
          <a href="/" style="margin-left:1rem">Back to site</a>
        </div>
      </form>
    </main>
  </body>
  </html>

